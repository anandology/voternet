$def with (ac, voters=[], query=None)
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Your Polling Booth</title>

    <style type="text/css">
        .container {
            padding-right: 15px;
            padding-left: 15px;
            margin-right: auto;
            margin-left: auto;
        }    
        @media (min-width: 992px) {
            .container {
                width: 970px;
            }
        }
        @media (min-width: 768px) {
            .container {
                width: 750px;
            }    
        }

        @media (min-width: 320px) {
            form {
                width: 300px;
            }
            input#q {
                width: 100%;
            }
            #button-clear {
                float: right;
            }
        }

        body {
            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
            font-size: 14px;            
        }

        h1 {
            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;        
        }

        table {
            display: table;
            border-collapse: separate;
            border-spacing: 2px;
            border-color: gray;
            border-collapse: collapse;
            border-spacing: 0;
        }   
        tr {
            display: table-row;
            vertical-align: inherit;
            border-color: inherit;
        }

        .table>thead>tr>th, .table>tbody>tr>th, .table>tfoot>tr>th, .table>thead>tr>td, .table>tbody>tr>td, .table>tfoot>tr>td {
            padding: 8px;
            line-height: 1.428571429;
            vertical-align: top;
            border-top: 1px solid #ddd;
        }        

        input#q {
            font-size: 18px;
            line-height: 1.33;
            border-radius: 6px; 
        }

        body {
            background: #ECE5D7;
            color: #626262;
        }

        h1 {
            color: #A65647;
        }
        a, a:visited {
            color: #BD8471;
        }

        .voter-card {
            border: 1px solid #C4BDB2;
            border-radius: 5px;
            text-align: left;
            width: 300px;  
            padding: 10px;
            padding-top: 0px;
            background: #D4CDC2;
            color: black;
        }
        .voter-card .section {
            margin: 10px 0px;
        }
        .voter-card .key {
            font-size: 0.8em;
        }
        .voter-card .value {
            font-size: 1.2em;
            font-weight: bold;
        }
        .voter-card a {
            color: inherit;
        }

        .section.section-small .value {
            font-size: 0.9em;
            font-weight: normal;
        }
    </style>    
</head>
<body>
<div class="container">
    <h3 style="color: #666; margin-bottom: 0px;">Find Your Polling Booth in</h3>
    <h1 style="margin-top: 0px;">Visakhapatnam North</h1>

    <form method="GET" action="/AC$ac" class="form">
      <div class="form-group">
        <label for="q" style="font-size: 0.9em;">Enter voter ID, house number or name</label>
        <div>
          <input class="form-control" type="text" name="q" id="q" value="$query">
        </div>
      </div>
      <div style="margin-top: 5px; padding:0px;">
        <input type="submit" class="btn btn-lg btn-primary" value="Search" />
        <input type="button" class="btn btn-lg btn-default" id="button-clear" value="Clear" onClick="
      clearValue();" />
      </div>
    </form>
    $if query:
        $if voters:
            $if len(voters) == 100:
                <h4>Found many matches, showing first 100.</h4>
            $else:
                <h4>Found $len(voters) matches</h4>
            <br/>
            $if len(voters) == 1:
                $ voter = voters[0]
                <div class="voter-card">
                    <div class="section" style="margin-bottom: -10px;">
                        <div class="key2" style="text-align: right; font-weight: bold; font-size: 0.9em;">$voter.voterid</div>
                    </div>
                    <div class="section">
                        <div class="key">Name</div>
                        <div class="value">$voter.name.title()</div>
                    </div>
                    <div class="section">
                        <div class="key">Part / Serial</div>
                        <div class="value">$voter.part / $voter.srno</div>
                    </div>
                    <div class="section">
                        <div class="key">Address</div>
                        <div class="value"><a href="/AC$ac?q=$voter.address">$voter.address</a></div>
                    </div>
                    <div class="section section-small">
                        <div class="key">Booth</div>
                        <div class="value">$voter.booth_name</a></div>
                    </div>
                    <div class="section section-small">
                        <div class="key">Relation Name</div>
                        <div class="value">$voter.rel_name.title()</a></div>
                    </div>
                    <div class="section section-small">
                        <div class="key">Gender / Age</div>
                        <div class="value">$voter.gender_age</a></div>
                    </div>
                </div>
            $else:
                <table class="table" style="width: auto;">
                    <tr>
                        <th>Booth</th>
                        <th>Serial</th>
                        <th>Voter ID</th>
                        <th>Name</th>
                        <th>Address</th>
                    </tr>
                    $for v in voters:
                        <tr>
                            <td>$v.part</td>
                            <td>$v.srno</td>
                            <td><a href="/AC$ac?q=$v.voterid">$v.voterid</a></td>
                            <td>$v.name.title()</td>
                            <td><a href="/AC$ac?q=$v.address">$v.address</a></td>
                        </tr>
                </table>
        $else:
            <h4 class="scroll-here">Sorry, no match found.</h4>
</div>

<!--
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script type="text/javascript">
\$(document).on('propertychange keyup input paste', '.clearable input', function(){
    var io = \$(this).val().length ? 1 : 0 ;
    \$(this).next('.icon_clear').stop().fadeTo(300,io);
}).on('click', '.icon_clear', function() {
    \$(this).delay(300).fadeTo(300,0).prev('input').val('');
});
\$(function() {
    if (\$(".scroll-here").length)
        \$("html,body").animate({scrollTop: \$(".scroll-here").offset().top});
});
</script>
-->
<script type="text/javascript">
function clearValue() {
    var q = document.getElementById("q");
    q.value = "";
    q.focus();
}

</script>

</body>
</html>

